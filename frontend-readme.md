# TokenPresale 前端使用指南

## 简介

这是一个用于与 TokenPresale 智能合约交互的前端界面。通过这个界面，您可以：

- 查看预售状态和进度
- 使用 ETH 参与代币预售
- 查看您的贡献和可领取代币
- 领取解锁的代币
- 管理员功能：提取 ETH、暂停/恢复预售

## 使用前提

1. 安装 MetaMask 或其他以太坊兼容的浏览器钱包扩展
2. 确保您的钱包已连接到正确的网络（Sepolia 测试网或本地 Anvil 链）
3. 在测试网上需要一些测试 ETH（可以从水龙头获取）

## 使用方法

### 部署前端

1. 将本项目下载到您的计算机
2. 确保项目根目录包含以下文件：
   - `index.html`
   - `app.js`

3. 启动一个简单的本地 HTTP 服务器：

如果您有 Node.js：
```bash
npx http-server
```

如果您有 Python 3：
```bash
python3 -m http.server 8000
```

4. 在浏览器中访问显示的地址（通常是 http://localhost:8080）

### 连接合约

1. 在页面加载后，点击右上角的三条杠按钮-"连接钱包"
2. 在弹出的 MetaMask 窗口中授权连接
3. 首次连接时，系统会提示您输入 TokenPresale 合约地址
   - 您可以从部署日志中找到合约地址
   - 地址格式为 0x 开头的十六进制字符串（例如：0x1234...）
4. 若想要切换多个账户预售，直接在Metamask中切换账户即可

### 参与预售

1. 在"参与预售"卡片中输入您想贡献的 ETH 数量
   - 系统会自动显示对应的预计 USD 价值
   - 注意：最低捐赠金额为等值 10 USD 的 ETH
2. 点击"参与预售"按钮
3. 在 MetaMask 弹窗中确认交易

### 查看您的贡献

在"我的贡献"卡片中可以看到：
- 您的总贡献金额（USD）
- 已领取的代币数量
- 当前可领取的代币数量

### 领取代币

1. 等待项目方完成提现（这会启用代币领取功能）
2. 随着时间的推移，您的代币会线性解锁（24小时内完全解锁）
3. 当有可领取代币时，点击"领取代币"按钮
4. 在 MetaMask 弹窗中确认交易

### 管理员功能（仅合约拥有者）

如果您是合约拥有者，将显示额外的管理员功能卡片：

1. **提取 ETH**：
   - 当预售达到目标或时间结束后可用
   - 点击按钮后确认 MetaMask 交易
   - 这会将合约中的 ETH 转移到拥有者地址，并启用代币领取功能

2. **暂停预售**：
   - 在紧急情况下暂停预售功能
   - 暂停后用户无法继续参与预售

3. **恢复预售**：
   - 恢复已暂停的预售
   - 恢复后用户可以继续参与预售

## 状态指示器

前端界面提供多种状态指示器：

- **预售结束时间**：显示预售剩余时间倒计时
- **进度条**：显示募集进度（当前募集金额/目标金额）
- **预售状态**：显示预售是否进行中、已结束或已暂停
- **是否可领取代币**：显示代币领取功能是否已启用

## 故障排除

1. **无法连接钱包**：
   - 确保安装了 MetaMask
   - 检查浏览器是否允许 MetaMask 弹窗
   - 尝试刷新页面

2. **无法参与预售**：
   - 检查预售是否仍在进行中
   - 确保捐赠金额大于最低要求（等值 10 USD 的 ETH）
   - 确保您有足够的 ETH 余额

3. **无法领取代币**：
   - 确认代币领取功能已启用（项目方已提现）
   - 确认您有可领取的代币
   - 等待代币解锁（线性解锁，24小时内完全解锁）

4. **合约地址错误**：
   - 如果输入了错误的合约地址，可以通过清除浏览器本地存储重置：
     - 打开浏览器开发者工具（F12）
     - 切换到 Application/应用 选项卡
     - 在左侧找到 Local Storage
     - 删除与网站相关的存储项
     - 刷新页面，重新输入正确的合约地址

## 注意事项

- 此前端仅用于演示和学习目的
- 在实际生产环境中使用前，应进行更严格的测试和安全审计
- 交易可能需要一段时间才能被网络确认，请耐心等待
- 页面每 10 秒自动刷新一次数据，也可以手动刷新页面获取最新状态 